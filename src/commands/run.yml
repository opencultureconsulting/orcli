name: run
help: run tmp OpenRefine workspace and execute shell script(s)
args:
  - import: src/args/file.yml
flags:
  - long: --memory
    help: maximum RAM for OpenRefine java heap space
    arg: ram
    default: "2048M"
  - long: --port
    help: PORT on which OpenRefine should listen
    arg: port
    default: "3333"
  - long: --interactive
    help: do not exit on error and keep bash shell open
  - import: src/flags/quiet.yml
examples:
  - orcli run --interactive
  - |-
    orcli run << EOF
      orcli import csv "https://git.io/fj5hF" --projectName "duplicates"
      orcli transform "duplicates" "https://git.io/fj5ju"
      orcli export tsv "duplicates"
    EOF
  - |-
    orcli run --memory "2000M" --port "3334" << EOF
      orcli import csv "https://git.io/fj5hF" --projectName "duplicates" &
      orcli import csv "https://git.io/fj5hF" --projectName "copy" &
      wait
      echo "finished import"
      orcli export csv "duplicates" --output duplicates.csv &
      orcli export tsv "duplicates" --output duplicates.tsv &
      wait
      wc duplicates*
    EOF
  - |-
    orcli run --interactive "file1.sh" "file2.sh" - << EOF
      echo "finished in \$SECONDS seconds"
    EOF
