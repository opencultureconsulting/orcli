name: orcli
help: OpenRefine command-line interface written in Bash
version: 0.1.0
footer: https://github.com/opencultureconsulting/orcli

dependencies:
  - curl
  - jq

environment_variables:
  - name: OPENREFINE_URL
    help: URL to OpenRefine server
    default: "http://localhost:3333"

examples:
  - orcli import csv file
  - orcli import csv "https://github.com/LibraryCarpentry/lc-open-refine/raw/gh-pages/data/doaj-article-sample.csv"
  - orcli list
  - orcli info "doaj article sample csv"
  - orcli export tsv "doaj article sample csv"
  - orcli export tsv "doaj article sample csv" --output doaj.tsv

commands:
  - name: import
    help: import commands

    commands:
      - name: csv
        help: import comma-separated values (CSV)
        args:
          - name: file
            help: Path to one or more files or URLs. When FILE is -, read standard input.
            default: "-"
            repeatable: true
        flags:
          - long: --separator
            help: character(s) that separates columns
            arg: separator
            default: ","
          - long: --encoding
            help: set character encoding
            arg: encoding
          - long: --trimStrings
            help: trim leading & trailing whitespace from strings
          - long: --projectName
            arg: projectName
            help: set a name for the OpenRefine project
        examples:
          - orcli import csv file
          - cat file | orcli import csv
          - orcli import csv file --separator ; --encoding ISO-8859-1 --trimStrings --projectName example
          - orcli import csv "https://github.com/LibraryCarpentry/lc-open-refine/raw/gh-pages/data/doaj-article-sample.csv"

  - name: list
    help: list projects on OpenRefine server

  - name: info
    help: show project metadata
    args:
      - name: project
        help: project name or id
        required: true
    examples:
      - info Clipboard
      - info 1234567890123

  - name: export
    help: export commands

    commands:
      - name: tsv
        help: export tab-separated values (TSV)
        args:
          - name: project
            help: project name or id
            required: true
        flags:
          - long: --output
            help: Write to file instead of stdout
            arg: file
          #- long: --column
          #  help: filter result set to one or more columns
          #  repeatable: true
          #- long: --facet
          #  help: filter result set by providing an OpenRefine facet config in json
          #  repeatable: true
          #- long: --mode
          #  help: set operation mode
          #  arg: mode
          #  default: "row-based"
          - long: --encoding
            help: set character encoding
            arg: encoding
            default: "UTF-8"
          #- long: --noColumnHeaders
          #  help: do not output column headers
          #- long: --blankRows
          #  help: output blank rows
          #- long: --quoteAll
          #  help: quote all cells
          #- long: --preview
          #  help: limit export to 10 rows/records
          #- long: --separator
          #  help: character(s) that separates columns
          #  arg: separator
          #  default: "\t"
          #- long: --lineSeparator
          #  help: character(s) that separates rows/records
          #  arg: lineSeparator
          #  default: "\n"
        examples:
          - orcli export tsv Clipboard
          - orcli export tsv Clipboard --output clipboard.tsv
          #- orcli export tsv Clipboard --output clipboard.tsv --facet '{"type":"text","name":"a","columnName":"a","mode":"text","caseSensitive":false,"invert":false,"query":"1"}'
          #- orcli export tsv Clipboard --output clipboard.tsv --column a --column b
